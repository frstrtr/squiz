#!/usr/bin/env python3
"""
Fix Russian translations for questions 91-120 based on actual English content
"""
import json
import os
import tempfile

# Correct Russian translations matching the actual English questions
translations = {
    91: {
        "question": "Вы шкипер на прогулочном судне 'A' курсом 120°C со скоростью 15 узлов. Судно 'B' находится справа по носу на постоянном пеленге, и расстояние уменьшается. Согласно МППСС, вы должны",
        "options": {
            "A": "поддерживать курс и скорость",
            "B": "изменить курс вправо",
            "C": "изменить курс влево",
            "D": "остановиться"
        }
    },
    92: {
        "question": "Вы шкипер на лодке, приближающейся к иностранному порту вечером, и видите этот знак. Этот знак обозначает",
        "options": {
            "A": "вход в порт",
            "B": "запретную зону",
            "C": "якорную стоянку",
            "D": "опасность"
        }
    },
    93: {
        "question": "Это судно",
        "options": {
            "A": "занято рыболовством",
            "B": "ограничено в маневренности",
            "C": "на якоре",
            "D": "лишено возможности управляться"
        }
    },
    94: {
        "question": "Какой термин используется для описания бортовой системы, которая позволяет изменять курс лодки?",
        "options": {
            "A": "рулевая система",
            "B": "якорная система",
            "C": "двигательная система",
            "D": "навигационная система"
        }
    },
    95: {
        "question": "Как вы описали бы кормовой огонь, который является частью навигационных огней судна?",
        "options": {
            "A": "белый огонь, видимый на 135 градусов",
            "B": "белый огонь, видимый на 225 градусов",
            "C": "красный огонь, видимый на 112,5 градусов",
            "D": "зеленый огонь, видимый на 112,5 градусов"
        }
    },
    96: {
        "question": "Игнорируя дрейф, какой будет приблизительный путь относительно земли лодки, идущей курсом 090°C при северном течении 2 узла?",
        "options": {
            "A": "090° путевой угол",
            "B": "045° путевой угол",
            "C": "000° путевой угол",
            "D": "180° путевой угол"
        }
    },
    97: {
        "question": "Что означает красный огонь, появляющийся на другой лодке после захода солнца?",
        "options": {
            "A": "вы видите левый борт другой лодки",
            "B": "вы видите правый борт другой лодки",
            "C": "вы видите корму другой лодки",
            "D": "другая лодка на якоре"
        }
    },
    98: {
        "question": "Все станции Национальной береговой охраны поддерживают слуховую вахту на радио канале",
        "options": {
            "A": "12",
            "B": "14",
            "C": "16",
            "D": "71"
        }
    },
    99: {
        "question": "Все станции Национальной береговой охраны поддерживают слуховую вахту на УКВ радио канале",
        "options": {
            "A": "12",
            "B": "14",
            "C": "16",
            "D": "71"
        }
    },
    100: {
        "question": "Какие самые важные части информации должны обязательно быть включены в сообщение о бедствии?",
        "options": {
            "A": "название судна и позиция",
            "B": "характер бедствия и необходимая помощь",
            "C": "количество людей на борту",
            "D": "все вышеперечисленное"
        }
    },
    101: {
        "question": "Какие самые важные части информации должны обязательно быть включены в сообщение MAYDAY?",
        "options": {
            "A": "MAYDAY три раза, название судна, позиция",
            "B": "характер бедствия, количество людей на борту",
            "C": "необходимая помощь",
            "D": "все вышеперечисленное"
        }
    },
    102: {
        "question": "Как мы называем способность лодки вернуться в вертикальное положение после крена?",
        "options": {
            "A": "плавучесть",
            "B": "остойчивость",
            "C": "водоизмещение",
            "D": "осадка"
        }
    },
    103: {
        "question": "Лицензия шкипера категории C (ранее категория A: навигация до 3 морских миль от берега) действительна в течение",
        "options": {
            "A": "1 года",
            "B": "2 лет",
            "C": "3 лет",
            "D": "5 лет"
        }
    },
    104: {
        "question": "Представьте, что правый борт судна получает ветер. Поэтому мы говорим, что",
        "options": {
            "A": "ветер дует с правого борта",
            "B": "ветер дует с левого борта",
            "C": "ветер дует с кормы",
            "D": "ветер дует с носа"
        }
    },
    105: {
        "question": "Представьте, что ваше судно дрейфует ночью из-за поломки двигателя, и вы не можете показывать требуемые навигационные огни. Какие сигналы вы должны показывать?",
        "options": {
            "A": "белый огонь или сигнальную ракету каждые 2 минуты",
            "B": "красный огонь каждые 5 минут",
            "C": "зеленый огонь каждые минуту",
            "D": "никаких сигналов"
        }
    },
    106: {
        "question": "Если судно преодолевает расстояние 4 морских мили за 20 минут, его скорость составляет",
        "options": {
            "A": "8 узлов",
            "B": "10 узлов",
            "C": "12 узлов",
            "D": "15 узлов"
        }
    },
    107: {
        "question": "Ваш GPS показывает позицию вашего судна как 19° 53'.823 S 057° 52'.456 E. '.823' в широте представляет",
        "options": {
            "A": "823 метра",
            "B": "823 десятых минуты",
            "C": "823 тысячных минуты",
            "D": "823 секунды"
        }
    },
    108: {
        "question": "Вы ведете свое судно северным курсом 010°C и обнаруживаете, что течение уносит вас влево. Чтобы компенсировать это, вы должны",
        "options": {
            "A": "изменить курс влево",
            "B": "изменить курс вправо",
            "C": "увеличить скорость",
            "D": "уменьшить скорость"
        }
    },
    109: {
        "question": "Представьте себя шкипером судна, которое собирается войти в гавань через канал. Вы видите этот знак. Вы должны оставить этот знак",
        "options": {
            "A": "слева",
            "B": "справа",
            "C": "с любой стороны",
            "D": "не входить в канал"
        }
    },
    110: {
        "question": "В Маврикии мы испытываем приливы и отливы в среднем за период 24 часа",
        "options": {
            "A": "один раз",
            "B": "два раза",
            "C": "три раза",
            "D": "четыре раза"
        }
    },
    111: {
        "question": "'Безопасная скорость' - это",
        "options": {
            "A": "максимальная скорость судна",
            "B": "скорость, при которой можно предпринять надлежащие действия",
            "C": "5 узлов",
            "D": "половина максимальной скорости"
        }
    },
    112: {
        "question": "'Обгоняемое судно' - это",
        "options": {
            "A": "судно, приближающееся с кормового сектора более 22,5 градусов",
            "B": "судно, приближающееся спереди",
            "C": "судно, пересекающее курс",
            "D": "судно на якоре"
        }
    },
    113: {
        "question": "Предположим, вы управляете полностью оборудованным прогулочным судном с механическим двигателем длиной 12 метров в прибрежных водах ночью и несете соответствующие навигационные огни. Эти огни включают",
        "options": {
            "A": "только белый круговой огонь",
            "B": "красный, зеленый и белый кормовой огонь",
            "C": "красный, зеленый, белый топовый и белый кормовой огонь",
            "D": "только красный и зеленый огни"
        }
    },
    114: {
        "question": "Что показывает парусное прогулочное судно в качестве дневного знака, когда оно также использует механический двигатель?",
        "options": {
            "A": "черный конус вершиной вниз",
            "B": "черный шар",
            "C": "черный цилиндр",
            "D": "ничего"
        }
    },
    115: {
        "question": "Представьте себя шкипером 6-метрового прогулочного судна, несущего соответствующие навигационные огни ночью. Вы внезапно замечаете другое судно впереди, показывающее только зеленый огонь. Вы должны",
        "options": {
            "A": "поддерживать курс и скорость",
            "B": "изменить курс вправо",
            "C": "изменить курс влево",
            "D": "остановиться"
        }
    },
    116: {
        "question": "Когда вы используете огнетушитель для тушения пожара на борту судна, вы должны направлять струю",
        "options": {
            "A": "на пламя",
            "B": "на основание огня",
            "C": "над огнем",
            "D": "под огнем"
        }
    },
    117: {
        "question": "Судно, преодолевающее расстояние 6 морских миль за 20 минут, имеет скорость",
        "options": {
            "A": "12 узлов",
            "B": "15 узлов",
            "C": "18 узлов",
            "D": "20 узлов"
        }
    },
    118: {
        "question": "Боковые знаки используются для обозначения канала или судоходного прохода",
        "options": {
            "A": "в центре",
            "B": "слева и справа",
            "C": "только слева",
            "D": "только справа"
        }
    },
    119: {
        "question": "Судно считается на мели, когда",
        "options": {
            "A": "оно касается дна и не может двигаться",
            "B": "оно на якоре",
            "C": "оно остановлено",
            "D": "у него отказал двигатель"
        }
    },
    120: {
        "question": "Какое из следующих утверждений о УКВ канале 16 НЕВЕРНО?",
        "options": {
            "A": "это международный канал вызова и бедствия",
            "B": "его можно использовать для связи в военных зонах",
            "C": "после установления контакта следует перейти на рабочий канал",
            "D": "береговая охрана использует его для вызова судов"
        }
    }
}

def apply_translations():
    """Apply correct Russian translations to questions 91-120"""
    
    with open('quiz-data-final.json', 'r', encoding='utf-8') as f:
        quiz_data = json.load(f)
    
    count = 0
    for question in quiz_data:
        q_id = question['id']
        if q_id in translations:
            question['translations']['ru'] = translations[q_id]
            count += 1
    
    # Write atomically
    temp_fd, temp_path = tempfile.mkstemp(suffix='.json', text=True)
    try:
        with os.fdopen(temp_fd, 'w', encoding='utf-8') as f:
            json.dump(quiz_data, f, ensure_ascii=False, indent=2)
        os.replace(temp_path, 'quiz-data-final.json')
        print(f"✓ Fixed Russian translations for questions 91-120 ({count} questions)")
    except Exception as e:
        os.unlink(temp_path)
        raise e

if __name__ == "__main__":
    apply_translations()
