#!/usr/bin/env python3
"""
Fix Russian translations for questions 1-30 based on actual English content
"""
import json
import os
import tempfile

# Correct Russian translations matching the actual English questions
translations = {
    1: {
        "question": "В каком из следующих сценариев шкипер совершит правонарушение в соответствии с Законом об Управлении по туризму 2006 года?",
        "options": {
            "A": "управление прогулочным судном без второго человека на борту для несения вахты",
            "B": "управление прогулочным судном, не оборудованным навигационными огнями в лунную ночь",
            "C": "управление прогулочным судном со скоростью 27 узлов в открытом море, когда другие суда не видны",
            "D": "управление прогулочным судном на расстоянии 21,5 морских миль от берега Флик-ан-Флак, имея лицензию категории"
        }
    },
    2: {
        "question": "При сообщении о положении вашего судна в море с помощью этого магнитного компаса, вы должны указать правильное направление относительно маяка как",
        "options": {
            "A": "345 C",
            "B": "185 C",
            "C": "350 C",
            "D": "165 C"
        }
    },
    3: {
        "question": "'Трюм' судна относится к",
        "options": {
            "A": "внутренней части корпуса судна на самом дне, где может накапливаться вода",
            "B": "части судна, где хранятся навигационные карты",
            "C": "части судна, где установлен двигатель",
            "D": "палубе судна"
        }
    },
    4: {
        "question": "Какое расстояние пройдет прогулочное судно за 1 час 15 минут при постоянной скорости 20 узлов?",
        "options": {
            "A": "20 морских миль",
            "B": "25 морских миль",
            "C": "30 морских миль",
            "D": "35 морских миль"
        }
    },
    5: {
        "question": "Как вы определите этот навигационный буй ночью?",
        "options": {
            "A": "по двум белым огням, один над другим",
            "B": "по красному огню",
            "C": "по зеленому огню",
            "D": "по желтому огню"
        }
    },
    6: {
        "question": "Ваше судно идет курсом 265° C ночью, и примерно в 1 морской миле впереди вы видите два зеленых огня, один над другим. В соответствии с МППСС, вы должны",
        "options": {
            "A": "изменить курс влево и пройти около 100 м справа от этого судна",
            "B": "остаться на том же курсе и пройти около 100 м справа от этого буя",
            "C": "изменить курс вправо и пройти около 100 м слева от этого буя",
            "D": "остановить судно и подождать, пока это судно не пройдет"
        }
    },
    7: {
        "question": "Какое утверждение относительно обязанностей вахты в море НЕВЕРНО?",
        "options": {
            "A": "вахта должна вестись всеми доступными средствами",
            "B": "вахта должна вестись только с помощью радара",
            "C": "вахта должна вестись визуально и на слух",
            "D": "надлежащая вахта должна вестись всегда"
        }
    },
    8: {
        "question": "'Безопасная скорость' - это скорость, принятая шкипером на основе нескольких факторов. Один из этих факторов НЕ является",
        "options": {
            "A": "видимость",
            "B": "движение судов",
            "C": "возможности судна",
            "D": "цвет судна"
        }
    },
    9: {
        "question": "Ваша лодка приближается к гавани, чтобы войти в канал перед швартовкой у причала. При входе в канал из открытого моря вы должны оставить",
        "options": {
            "A": "зеленый буй слева и красный буй справа",
            "B": "красный буй слева и зеленый буй справа",
            "C": "оба буя слева",
            "D": "оба буя справа"
        }
    },
    10: {
        "question": "Эти два прогулочных судна с механическим двигателем встречаются в ситуации пересечения курсов, когда столкновение неизбежно. В соответствии с МППСС",
        "options": {
            "A": "судно X должно изменить курс вправо, чтобы пройти за кормой судна Y",
            "B": "судно Y должно изменить курс вправо, чтобы пройти за кормой судна X",
            "C": "оба судна должны изменить курс вправо",
            "D": "оба судна должны остановиться"
        }
    },
    11: {
        "question": "Вы идете курсом 090° в открытом море ночью при хорошей видимости. Вы замечаете огни другого судна прямо по курсу на расстоянии около 3 морских миль. Вы видите красный огонь слева и зеленый огонь справа, а также два белых огня, один над другим. Это другое судно",
        "options": {
            "A": "идет прямо на вас",
            "B": "движется справа налево",
            "C": "движется слева направо",
            "D": "стоит на якоре"
        }
    },
    12: {
        "question": "Согласно регламентам Управления по туризму, владелец прогулочного судна должен уведомить Управление по туризму в случае изменения",
        "options": {
            "A": "адреса владельца",
            "B": "типа двигателя",
            "C": "цвета судна",
            "D": "названия судна"
        }
    },
    13: {
        "question": "Допустим, произошла авария на борту вашего прогулочного судна. Какое из следующих действий НЕ является частью первоочередных действий?",
        "options": {
            "A": "оценить ситуацию",
            "B": "проверить наличие раненых",
            "C": "сделать фотографии для социальных сетей",
            "D": "обеспечить безопасность судна"
        }
    },
    14: {
        "question": "Что из следующего НЕ является частью пожарного треугольника?",
        "options": {
            "A": "кислород",
            "B": "азот",
            "C": "тепло",
            "D": "топливо"
        }
    },
    15: {
        "question": "Магнитный компас показывает направление на",
        "options": {
            "A": "истинный север",
            "B": "магнитный север",
            "C": "географический север",
            "D": "южный полюс"
        }
    },
    16: {
        "question": "В соответствии с МППСС, когда два судна с механическим двигателем встречаются лоб в лоб так, что существует риск столкновения, каждое судно должно",
        "options": {
            "A": "изменить курс влево",
            "B": "изменить курс вправо",
            "C": "остановиться",
            "D": "дать задний ход"
        }
    },
    17: {
        "question": "Какое из следующих утверждений НЕВЕРНО относительно использования УКВ радио на борту прогулочного судна?",
        "options": {
            "A": "канал 16 является международным каналом вызова и бедствия",
            "B": "канал 16 может использоваться для передачи в любое время для любых целей",
            "C": "канал 16 используется береговой охраной для вызова судов",
            "D": "после установления контакта на канале 16 следует перейти на рабочий канал"
        }
    },
    18: {
        "question": "Управление по туризму может отозвать лицензию шкипера, если шкипер",
        "options": {
            "A": "был осужден за преступление",
            "B": "нарушил правила",
            "C": "признан непригодным для управления судном",
            "D": "все вышеперечисленное"
        }
    },
    19: {
        "question": "Вы находитесь в море у побережья Порт-Луи и слышите радиовызов, начинающийся со слов SECURITE SECURITE SECURITE. Это означает, что следующее сообщение касается",
        "options": {
            "A": "опасности для жизни",
            "B": "безопасности навигации или важного метеорологического предупреждения",
            "C": "срочного медицинского сообщения",
            "D": "пожара на борту судна"
        }
    },
    20: {
        "question": "Вы шкипер судна с механическим двигателем в море с членами экипажа и пассажирами на борту. Вы заметили судно X прямо впереди на противоположном курсе, и существует риск столкновения. Согласно МППСС, ваше судно должно",
        "options": {
            "A": "изменить курс влево",
            "B": "изменить курс вправо",
            "C": "остановиться",
            "D": "увеличить скорость"
        }
    },
    21: {
        "question": "При заправке прогулочного судна топливом на воде, какое из следующих действий НЕ рекомендуется?",
        "options": {
            "A": "выключить двигатель",
            "B": "запретить курение",
            "C": "держать огнетушитель под рукой",
            "D": "разрешить пассажирам курить на корме"
        }
    },
    22: {
        "question": "Вы шкипер прогулочного судна и собираетесь выйти в море с пассажирами и членами экипажа. Перед отправлением вы должны убедиться, что",
        "options": {
            "A": "у всех есть спасательные жилеты",
            "B": "достаточно топлива для поездки",
            "C": "погодные условия безопасны",
            "D": "все вышеперечисленное"
        }
    },
    23: {
        "question": "Какое из следующих утверждений ВЕРНО относительно навигационных огней?",
        "options": {
            "A": "они должны быть включены только ночью",
            "B": "они должны быть включены от заката до рассвета и при ограниченной видимости",
            "C": "они не нужны в лагуне",
            "D": "они нужны только на больших судах"
        }
    },
    24: {
        "question": "Ваше судно приближается к причалу для швартовки. Какой угол подхода рекомендуется?",
        "options": {
            "A": "90 градусов к причалу",
            "B": "параллельно причалу",
            "C": "под небольшим углом 20-30 градусов",
            "D": "под любым углом"
        }
    },
    25: {
        "question": "Какое из следующих утверждений НЕВЕРНО?",
        "options": {
            "A": "УКВ канал 16 является международным каналом вызова и бедствия",
            "B": "УКВ канал 16 можно использовать для связи между судами в пределах гавани для любых целей",
            "C": "УКВ канал 16 используется береговой охраной для вызова судов",
            "D": "следует использовать канал 16 только для первоначального вызова, а затем перейти на рабочий канал"
        }
    },
    26: {
        "question": "Судно, ограниченное в возможности маневрировать, - это судно, которое",
        "options": {
            "A": "занято рыболовством",
            "B": "ограничено в способности маневрировать из-за характера своей работы",
            "C": "стоит на якоре",
            "D": "на мели"
        }
    },
    27: {
        "question": "При постановке на якорь, какое из следующих действий НЕ рекомендуется?",
        "options": {
            "A": "выбрать защищенное место",
            "B": "проверить глубину воды",
            "C": "выпустить достаточную длину якорной цепи",
            "D": "заякориться в главном судоходном канале"
        }
    },
    28: {
        "question": "Что означает термин 'правый борт'?",
        "options": {
            "A": "передняя часть судна",
            "B": "задняя часть судна",
            "C": "правая сторона судна, если смотреть вперед",
            "D": "левая сторона судна, если смотреть вперед"
        }
    },
    29: {
        "question": "Один короткий звуковой сигнал означает",
        "options": {
            "A": "я изменяю курс вправо",
            "B": "я изменяю курс влево",
            "C": "я даю задний ход",
            "D": "опасность"
        }
    },
    30: {
        "question": "Изобара на метеорологической карте - это кривая, линия или даже круг, соединяющие области в море, которые имеют",
        "options": {
            "A": "одинаковую температуру",
            "B": "одинаковое атмосферное давление",
            "C": "одинаковую глубину воды",
            "D": "одинаковое направление ветра"
        }
    }
}

def apply_translations():
    """Apply correct Russian translations to questions 1-30"""
    
    with open('quiz-data-final.json', 'r', encoding='utf-8') as f:
        quiz_data = json.load(f)
    
    count = 0
    for question in quiz_data:
        q_id = question['id']
        if q_id in translations:
            question['translations']['ru'] = translations[q_id]
            count += 1
    
    # Write atomically
    temp_fd, temp_path = tempfile.mkstemp(suffix='.json', text=True)
    try:
        with os.fdopen(temp_fd, 'w', encoding='utf-8') as f:
            json.dump(quiz_data, f, ensure_ascii=False, indent=2)
        os.replace(temp_path, 'quiz-data-final.json')
        print(f"✓ Fixed Russian translations for questions 1-30 ({count} questions)")
    except Exception as e:
        os.unlink(temp_path)
        raise e

if __name__ == "__main__":
    apply_translations()
