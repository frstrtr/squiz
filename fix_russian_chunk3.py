#!/usr/bin/env python3
"""
Fix Russian translations for questions 61-90 based on actual English content
"""
import json
import os
import tempfile

# Correct Russian translations matching the actual English questions
translations = {
    61: {
        "question": "Стоя на носу прогулочного судна и глядя в корму ночью, какой навигационный огонь вы увидите?",
        "options": {
            "A": "красный огонь",
            "B": "зеленый огонь",
            "C": "белый огонь",
            "D": "никакого огня"
        }
    },
    62: {
        "question": "Вы шли на маяк Ило-Бенуа по гирокомпасу, когда внезапно компас вышел из строя. Какой компас вы будете использовать для навигации?",
        "options": {
            "A": "магнитный компас",
            "B": "солнечный компас",
            "C": "звездный компас",
            "D": "никакой компас"
        }
    },
    63: {
        "question": "Ваше прогулочное судно преодолевает среднее расстояние 1,2 морских мили за 6 минут. Какова ваша скорость в узлах?",
        "options": {
            "A": "6 узлов",
            "B": "10 узлов",
            "C": "12 узлов",
            "D": "15 узлов"
        }
    },
    64: {
        "question": "Если ваш GPS показывает вашу позицию как 00° 23'.123 N 000° 14'.701 E, то '.123' представляет",
        "options": {
            "A": "123 метра",
            "B": "123 десятых минуты",
            "C": "123 тысячных минуты",
            "D": "123 секунды"
        }
    },
    65: {
        "question": "Вы идете курсом 260°C со скоростью 12 узлов и замечаете этот буй прямо впереди на расстоянии около 0,5 морской мили. Вы должны",
        "options": {
            "A": "изменить курс влево, чтобы пройти справа от буя",
            "B": "изменить курс вправо, чтобы пройти справа от буя",
            "C": "изменить курс влево, чтобы пройти слева от буя",
            "D": "продолжать тем же курсом"
        }
    },
    66: {
        "question": "Какое утверждение относительно этого буя НЕВЕРНО?",
        "options": {
            "A": "это зеленый конический буй",
            "B": "при входе в канал его следует оставить справа",
            "C": "это боковой знак",
            "D": "при выходе из канала его следует оставить слева"
        }
    },
    67: {
        "question": "Сизигийные приливы характеризуются",
        "options": {
            "A": "самым большим диапазоном между приливом и отливом",
            "B": "самым малым диапазоном между приливом и отливом",
            "C": "отсутствием приливов и отливов",
            "D": "одинаковым уровнем воды"
        }
    },
    68: {
        "question": "Этот матрос помогает в безопасной навигации судна",
        "options": {
            "A": "управляя рулем",
            "B": "ведя вахту",
            "C": "работая с якорем",
            "D": "обслуживая двигатель"
        }
    },
    69: {
        "question": "На основе приведенного выше сценария, можно сделать вывод в 08:12, что",
        "options": {
            "A": "судно находится на курсе столкновения",
            "B": "судно расходится",
            "C": "судно стоит на якоре",
            "D": "судно на мели"
        }
    },
    70: {
        "question": "Это судно с механическим двигателем находится на 5 градусов справа по носу и поддерживает свой курс и скорость. Расстояние между вами постепенно уменьшается, и вы определили, что существует риск столкновения. Ваше судно должно",
        "options": {
            "A": "поддерживать курс и скорость",
            "B": "изменить курс вправо и пройти за кормой другого судна",
            "C": "изменить курс влево",
            "D": "остановиться"
        }
    },
    71: {
        "question": "Это судно с механическим двигателем занято парасейлингом и находится слева по носу. Вы шкипер судна с механическим двигателем и определили, что существует риск столкновения. Ваше судно должно",
        "options": {
            "A": "поддерживать курс и скорость",
            "B": "уступить дорогу этому судну",
            "C": "подать звуковой сигнал",
            "D": "остановиться"
        }
    },
    72: {
        "question": "Этот танкер находится прямо впереди вас, и расстояние постепенно уменьшается. Какое действие вы должны предпринять согласно МППСС?",
        "options": {
            "A": "изменить курс влево",
            "B": "изменить курс вправо",
            "C": "поддерживать курс",
            "D": "увеличить скорость"
        }
    },
    73: {
        "question": "Это парусное судно находится слева по носу, и вы не можете определить, поддерживает ли она курс или изменяет его. Как судно с механическим двигателем, вы должны",
        "options": {
            "A": "поддерживать курс и скорость",
            "B": "уступить дорогу парусному судну",
            "C": "подать звуковой сигнал",
            "D": "увеличить скорость"
        }
    },
    74: {
        "question": "Эти огни видны вам ночью на расстоянии 2 морских миль. Это судно показывает, что оно",
        "options": {
            "A": "на якоре",
            "B": "на мели",
            "C": "занято рыболовством",
            "D": "ограничено в маневренности"
        }
    },
    75: {
        "question": "Это судно показывает черный цилиндр днем. Это означает, что оно",
        "options": {
            "A": "на якоре",
            "B": "ограничено осадкой",
            "C": "занято рыболовством",
            "D": "на мели"
        }
    },
    76: {
        "question": "Каков рекомендуемый угол подхода при маневрировании судна к причалу?",
        "options": {
            "A": "90 градусов",
            "B": "45 градусов",
            "C": "20-30 градусов",
            "D": "параллельно причалу"
        }
    },
    77: {
        "question": "Вы входите в гавань, держа эти два створных знака на одной линии друг за другом. Какой курс вы ведете?",
        "options": {
            "A": "000° C",
            "B": "090° C",
            "C": "180° C",
            "D": "270° C"
        }
    },
    78: {
        "question": "Контейнеровоз находится справа по носу на расстоянии 2 морских миль. Вы наблюдаете, что пеленг на него остается постоянным, а расстояние уменьшается. Как судно с механическим двигателем, вы должны",
        "options": {
            "A": "поддерживать курс и скорость",
            "B": "изменить курс вправо",
            "C": "изменить курс влево",
            "D": "остановиться"
        }
    },
    79: {
        "question": "Инструктаж по безопасности шкипером включает различные пункты. Основная цель инструктажа по безопасности - это",
        "options": {
            "A": "информировать пассажиров о маршруте",
            "B": "ознакомить пассажиров с процедурами безопасности и аварийным оборудованием",
            "C": "объяснить правила поведения на судне",
            "D": "показать пассажирам туалеты"
        }
    },
    80: {
        "question": "Какое навигационное оборудование указывает курс судна?",
        "options": {
            "A": "GPS",
            "B": "эхолот",
            "C": "компас",
            "D": "радар"
        }
    },
    81: {
        "question": "Как называется бортовая система, используемая для изменения курса лодки?",
        "options": {
            "A": "руль",
            "B": "якорь",
            "C": "винт",
            "D": "киль"
        }
    },
    82: {
        "question": "Периодическое повышение и понижение уровня моря более известно в навигации как",
        "options": {
            "A": "течение",
            "B": "прилив и отлив",
            "C": "волна",
            "D": "зыбь"
        }
    },
    83: {
        "question": "Компасный пеленг этого маяка от вашей лодки составляет 345° C. Ваше судно находится",
        "options": {
            "A": "к северо-востоку от маяка",
            "B": "к юго-западу от маяка",
            "C": "к северо-западу от маяка",
            "D": "к юго-востоку от маяка"
        }
    },
    84: {
        "question": "Глобальная система позиционирования (GPS) показывает позицию вашей лодки как 20° 09'.5 S 057° 30'.5 E. Это означает, что вы находитесь",
        "options": {
            "A": "к северу от экватора",
            "B": "к югу от экватора",
            "C": "на экваторе",
            "D": "на северном полюсе"
        }
    },
    85: {
        "question": "Ваша лодка идет на юг курсом 180° C, и этот буй находится прямо впереди на расстоянии около 0,5 морской мили. Вы должны",
        "options": {
            "A": "изменить курс влево и пройти слева от буя",
            "B": "изменить курс вправо и пройти справа от буя",
            "C": "изменить курс влево и пройти справа от буя",
            "D": "продолжать тем же курсом"
        }
    },
    86: {
        "question": "При каких обстоятельствах шкипер будет прав, не следуя правилам уступания дороги?",
        "options": {
            "A": "когда соблюдение правил создаст непосредственную опасность",
            "B": "когда другое судно меньше",
            "C": "когда другое судно медленнее",
            "D": "никогда"
        }
    },
    87: {
        "question": "Вести 'навигационную вахту' означает",
        "options": {
            "A": "наблюдать только по радару",
            "B": "наблюдать только визуально",
            "C": "использовать все доступные средства для наблюдения",
            "D": "доверять GPS"
        }
    },
    88: {
        "question": "Что такое 'безопасная скорость'?",
        "options": {
            "A": "максимальная скорость судна",
            "B": "скорость, при которой судно может предпринять надлежащие действия для избежания столкновения",
            "C": "скорость 5 узлов",
            "D": "скорость, установленная производителем"
        }
    },
    89: {
        "question": "Один из факторов, которые следует учитывать при определении безопасной скорости, - это",
        "options": {
            "A": "цвет судна",
            "B": "видимость",
            "C": "возраст шкипера",
            "D": "количество пассажиров"
        }
    },
    90: {
        "question": "Вы шкипер лодки Y, и прямо впереди лодка X идет прямо противоположным курсом, и существует риск столкновения. Что должна сделать лодка Y согласно МППСС?",
        "options": {
            "A": "изменить курс влево",
            "B": "изменить курс вправо",
            "C": "остановиться",
            "D": "дать задний ход"
        }
    }
}

def apply_translations():
    """Apply correct Russian translations to questions 61-90"""
    
    with open('quiz-data-final.json', 'r', encoding='utf-8') as f:
        quiz_data = json.load(f)
    
    count = 0
    for question in quiz_data:
        q_id = question['id']
        if q_id in translations:
            question['translations']['ru'] = translations[q_id]
            count += 1
    
    # Write atomically
    temp_fd, temp_path = tempfile.mkstemp(suffix='.json', text=True)
    try:
        with os.fdopen(temp_fd, 'w', encoding='utf-8') as f:
            json.dump(quiz_data, f, ensure_ascii=False, indent=2)
        os.replace(temp_path, 'quiz-data-final.json')
        print(f"✓ Fixed Russian translations for questions 61-90 ({count} questions)")
    except Exception as e:
        os.unlink(temp_path)
        raise e

if __name__ == "__main__":
    apply_translations()
