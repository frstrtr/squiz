#!/usr/bin/env python3
"""
Add complete Russian translations for questions 121-145
Maritime/nautical terminology for Mauritius skipper exam
"""
import json
import os
import tempfile

# Russian translations for questions 121-145
translations = {
    121: {
        "question": "Дифферент судна - это",
        "options": {
            "A": "боковой наклон судна",
            "B": "продольный наклон судна",
            "C": "вертикальное движение судна",
            "D": "горизонтальное движение судна"
        }
    },
    122: {
        "question": "Какое из следующих утверждений ВЕРНО относительно навигационных огней?",
        "options": {
            "A": "они нужны только ночью",
            "B": "они должны быть включены от заката до восхода и при ограниченной видимости",
            "C": "они не нужны в лагуне",
            "D": "они нужны только на больших судах"
        }
    },
    123: {
        "question": "Транец - это",
        "options": {
            "A": "передняя часть судна",
            "B": "плоская задняя поверхность кормы",
            "C": "боковая часть судна",
            "D": "палуба судна"
        }
    },
    124: {
        "question": "Какое из следующих действий следует предпринять, если вы видите человека, упавшего за борт?",
        "options": {
            "A": "продолжать движение",
            "B": "немедленно бросить спасательный круг",
            "C": "ждать помощи",
            "D": "выключить двигатель и ждать"
        }
    },
    125: {
        "question": "Надводный борт - это",
        "options": {
            "A": "расстояние от ватерлинии до палубы",
            "B": "расстояние от киля до ватерлинии",
            "C": "ширина судна",
            "D": "длина судна"
        }
    },
    126: {
        "question": "Какое из следующих утверждений НЕВЕРНО относительно якорной стоянки?",
        "options": {
            "A": "выбирайте защищенное место",
            "B": "убедитесь, что якорь держит",
            "C": "можно оставить судно без присмотра на долгое время",
            "D": "проверьте глубину и тип дна"
        }
    },
    127: {
        "question": "Лаг используется для измерения",
        "options": {
            "A": "глубины воды",
            "B": "скорости судна",
            "C": "направления",
            "D": "температуры воды"
        }
    },
    128: {
        "question": "Эхолот используется для измерения",
        "options": {
            "A": "скорости судна",
            "B": "глубины воды",
            "C": "направления",
            "D": "расстояния до берега"
        }
    },
    129: {
        "question": "Какое из следующих утверждений ВЕРНО относительно прогноза погоды?",
        "options": {
            "A": "его можно игнорировать, если небо чистое",
            "B": "его следует всегда проверять перед выходом в море",
            "C": "он нужен только для дальних плаваний",
            "D": "он не важен в лагуне"
        }
    },
    130: {
        "question": "Румб компаса равен",
        "options": {
            "A": "11,25 градусов",
            "B": "15 градусов",
            "C": "22,5 градусов",
            "D": "45 градусов"
        }
    },
    131: {
        "question": "Какое из следующих утверждений НЕВЕРНО относительно топлива?",
        "options": {
            "A": "всегда проверяйте уровень топлива перед выходом",
            "B": "имейте достаточный запас на обратный путь",
            "C": "можно заправляться при работающем двигателе",
            "D": "держите огнетушитель рядом при заправке"
        }
    },
    132: {
        "question": "Какова цель этого знака?",
        "options": {
            "A": "указать на безопасные воды",
            "B": "указать на зону для купания",
            "C": "указать на запрет для судов",
            "D": "указать на зону якорной стоянки"
        }
    },
    133: {
        "question": "EPIRB - это",
        "options": {
            "A": "радиомаяк для определения местоположения при бедствии",
            "B": "тип огнетушителя",
            "C": "навигационное устройство",
            "D": "спасательный плот"
        }
    },
    134: {
        "question": "Какое из следующих утверждений ВЕРНО относительно буксировки?",
        "options": {
            "A": "можно буксировать на высокой скорости",
            "B": "буксировочный трос должен быть достаточно длинным",
            "C": "не нужно сообщать другим судам",
            "D": "можно буксировать в любую погоду"
        }
    },
    135: {
        "question": "Когда следует использовать аварийный сигнал MAYDAY?",
        "options": {
            "A": "когда нужна помощь в навигации",
            "B": "когда судно или жизнь находятся в серьезной опасности",
            "C": "когда нужна медицинская консультация",
            "D": "когда нужна информация о погоде"
        }
    },
    136: {
        "question": "Это судно показывает, что оно",
        "options": {
            "A": "занято рыболовством",
            "B": "ограничено в маневренности",
            "C": "на якоре",
            "D": "лишено возможности управляться"
        }
    },
    137: {
        "question": "Правило 5 МППСС требует, чтобы",
        "options": {
            "A": "включались навигационные огни",
            "B": "велась надлежащая вахта",
            "C": "использовались звуковые сигналы",
            "D": "проверялась погода"
        }
    },
    138: {
        "question": "Это судно показывает, что оно",
        "options": {
            "A": "занято тралением",
            "B": "ограничено в маневренности",
            "C": "лишено возможности управляться",
            "D": "на мели"
        }
    },
    139: {
        "question": "Какое из следующих утверждений ВЕРНО относительно спасательных жилетов?",
        "options": {
            "A": "они должны подходить по размеру",
            "B": "один размер подходит всем",
            "C": "они не нужны умеющим плавать",
            "D": "их можно хранить в запертом шкафчике"
        }
    },
    140: {
        "question": "Киль - это",
        "options": {
            "A": "верхняя часть судна",
            "B": "нижняя центральная конструктивная часть судна",
            "C": "боковая часть судна",
            "D": "задняя часть судна"
        }
    },
    141: {
        "question": "Этот знак указывает на",
        "options": {
            "A": "зону купания",
            "B": "запрет для судов с двигателем",
            "C": "зону якорной стоянки",
            "D": "безопасные воды"
        }
    },
    142: {
        "question": "Правильный способ поднять якорь",
        "options": {
            "A": "быстро потянуть трос",
            "B": "использовать двигатель для подтягивания к якорю, затем поднять его",
            "C": "разрезать трос",
            "D": "оставить якорь на дне"
        }
    },
    143: {
        "question": "Пирога столкнулась с вашим судном во время швартовки в гавани. Что вы должны сделать в первую очередь?",
        "options": {
            "A": "покинуть место происшествия",
            "B": "проверить наличие пострадавших",
            "C": "сфотографировать повреждения",
            "D": "позвонить в страховую компанию"
        }
    },
    144: {
        "question": "В соответствии с Законом об Управлении по туризму, шкипер должен сообщить о столкновении, повлекшем травму или материальный ущерб, в течение",
        "options": {
            "A": "6 часов",
            "B": "12 часов",
            "C": "24 часов",
            "D": "48 часов"
        }
    },
    145: {
        "question": "Это судно",
        "options": {
            "A": "парусное судно",
            "B": "ограничено осадкой",
            "C": "занято рыболовством",
            "D": "лишено возможности управляться"
        }
    }
}

def apply_translations():
    """Apply Russian translations to questions 121-145"""
    
    with open('quiz-data-final.json', 'r', encoding='utf-8') as f:
        quiz_data = json.load(f)
    
    count = 0
    for question in quiz_data:
        q_id = question['id']
        if q_id in translations:
            question['translations']['ru'] = translations[q_id]
            count += 1
    
    # Write atomically
    temp_fd, temp_path = tempfile.mkstemp(suffix='.json', text=True)
    try:
        with os.fdopen(temp_fd, 'w', encoding='utf-8') as f:
            json.dump(quiz_data, f, ensure_ascii=False, indent=2)
        os.replace(temp_path, 'quiz-data-final.json')
        print(f"✓ Translated questions 121-145 ({count} questions)")
        print(f"✓ All 145 questions now have complete Russian translations!")
    except Exception as e:
        os.unlink(temp_path)
        raise e

if __name__ == "__main__":
    apply_translations()
